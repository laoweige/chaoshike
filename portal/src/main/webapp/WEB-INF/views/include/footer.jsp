<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<div class="com_footer_case">
        <div class="common_case">
            <div class="com_footer_address_case article_footer_address_case">
                <dl class="com_footer_address_item">
                    <dd class="com_footer_address_item_img com_footer_address_item_img_i1 com_ga_vector"></dd>
                    <dd class="com_footer_address_item_docu">
                        <h5>购物指南</h5>
                        <p><a href="#?article-foot_gouwuzhinan-73.html" target="_blank">如何下单</a></p>
                        <p><a href="#?article-foot_gouwuzhinan-74.html" target="_blank">查询订单</a></p>
                        <p><a href="#?article-foot_gouwuzhinan-75.html" target="_blank">付款方式</a></p>
                        <p><a href="#?article-foot_gouwuzhinan-76.html" target="_blank">免责声明</a></p>
                        <p><a href="#?article-foot_gouwuzhinan-76.html" target="_blank">用户隐私策略</a></p>
                    </dd>
                </dl>
                <dl class="com_footer_address_item">
                    <dd class="com_footer_address_item_img com_footer_address_item_img_i2 com_ga_vector"></dd>
                    <dd class="com_footer_address_item_docu">
                        <h5>商品配送</h5>
                        <p><a href="#?article-foot_shangpinpeisong-77.html" target="_blank">配送收费标准</a></p>
                        <p><a href="#?article-foot_shangpinpeisong-78.html" target="_blank">配送流程</a></p>
                        <p><a href="#?article-foot_shangpinpeisong-79.html" target="_blank">生活超市配送范围</a></p>
                    </dd>
                </dl>
                <dl class="com_footer_address_item">
                    <dd class="com_footer_address_item_img com_footer_address_item_img_i3 com_ga_vector"></dd>
                    <dd class="com_footer_address_item_docu">
                        <h5>商品售后</h5>
                        <p><a href="#?article-foot_shangpinshouhou-81.html" target="_blank">售后服务政策</a></p>
                        <p><a href="#?article-foot_shangpinshouhou-82.html" target="_blank">退款说明</a></p>
                        <p><a href="#?article-foot_shangpinshouhou-83.html" target="_blank">退换货说明</a></p>
                        <p><a href="#?article-foot_shangpinshouhou-84.html" target="_blank">退换货流程</a></p>
                    </dd>
                </dl>
                <dl class="com_footer_address_item">
                    <dd class="com_footer_address_item_img com_footer_address_item_img_i4 com_ga_vector"></dd>
                    <dd class="com_footer_address_item_docu">
                        <h5>需要帮助</h5>
                        <p><a href="#?article-foot_xuyaobangzhu-86.html" target="_blank">代购商品使用说明</a></p>
                        <p><a href="#?article-foot_xuyaobangzhu-87.html" target="_blank">社区001卡使用说明</a></p>
                        <p><a href="#?article-foot_xuyaobangzhu-88.html" target="_blank">代金券使用说明</a></p>
                    </dd>
                </dl>
                <dl class="com_footer_address_item com_footer_address_item_nopadding">
                    <dd class="com_footer_address_item_img com_footer_address_item_img_i5 com_ga_vector"></dd>
                    <dd class="com_footer_address_item_docu">
                        <h5>联系我们</h5>
                        <p><a href="#?article-foot_lianxiwomen-89.html" target="_blank">关于我们</a></p>
                        <p><a href="#?article-foot_lianxiwomen-91.html" target="_blank">人才招聘</a></p>
                        <p><a href="#?article-foot_lianxiwomen-92.html" target="_blank">业务合作</a></p>
                    </dd>
                </dl>
                <aside class="com_v2_footer_right_case com_v2_footer_right_case" id="com_v2_footer_case">
                    <div class="com_footer_right com_v2_footer_right">
                        <div class="com_footer_right_top">
                            <a href="http://www.shequ001.com/download.php?ping=pc_www" target="_blank" class="com_v2_footer_right_appd com_v2_ga" title="去下载APP">APP下载</a> <a href="http://e.weibo.com/u/3195532043" target="_blank" class="com_v2_footer_right_weibo com_v2_ga" title="微博关注">微博关注</a> <a href="javascript:void(0);" class="com_v2_footer_right_wechat com_v2_ga" title="微信关注">微信关注</a>
                            <div class="common_clear"></div>
                        </div>
                        <span class="com_weixin common_hide"><img src="./assets/images/qcode-weixin.gif"></span>
                        <div class="com_footer_dress_case article_footer_dress_case">
                            © 2014 shequ001_社区001<br>
                            京ICP备12017510  京ICP证12047<br>
                            0全国统一订购电话：10108001<br>
                            1-电话购物  |  2-商品咨询  |  3-投诉建议<br>
                        </div>
                    </div>
                </aside>
                <div class="common_clear"></div>
            </div>
            <div class="common_clear"></div>
        </div>
    </div>
    <script>
        jQuery('#com_v2_footer_case').ready(function(e) {
            var $=jQuery;
            var get_obj=$('#com_v2_footer_case');
            var com_v2_footer_dis_wechat=get_obj.find('.com_weixin');
            get_obj.find('.com_v2_footer_right_wechat').hover(function(){

                com_v2_footer_dis_wechat.removeClass('common_hide');
            },function(){
                com_v2_footer_dis_wechat.addClass('common_hide');
            });
        });
    </script>
    <script>
        jQuery(window).ready(function(){
            var $=jQuery;
            $('.article_left_tuwen2').hover(
                function(){$(this).find("span").addClass("hover_color");},
                function(){$(this).find("span").removeClass("hover_color")}
            )
        });
    </script>

    <script type="text/javascript" src="./assets/javascript/tj.php"></script><div class="common_hide">
    <script src="http://hm.baidu.com/h.js?454c19a2884c3035c2346a4b7b9205ba" type="text/javascript"></script></div>
    <script type="text/javascript">
        var Shop = {"url":{"shipping":"\/cart-shipping.html","total":"\/cart-total.html","region":"\/tools-selRegion.html","payment":"\/cart-payment.html","purchase_shipping":"\/cart-purchase_shipping.html","purchase_def_addr":"\/cart-purchase_def_addr.html","purchase_payment":"\/cart-purchase_payment.html","get_default_info":"\/cart-get_default_info.html","diff":"\/product-diff.html","fav_url":"\/member-ajax_fav.html"},"base_url":""};
        var __time_out = 1000;
        if (Shop.set != undefined&&Shop.set.refer_timeout) __time_out = Shop.set.refer_timeout;
        window.addEvent('domready',function(){

            var ReferObj ={};
            Object.append(ReferObj,{
                serverTime:1416291390,
                init:function(){
                    var FIRST_REFER=Cookie.read('S[FIRST_REFER]');
                    var NOW_REFER=Cookie.read('S[NOW_REFER]');
                    var nowDate=this.time=this.serverTime*1000;
                    if(!window.location.href.test('#r-')&&!document.referrer||document.referrer.test(document.domain))return;
                    if(window.location.href.test('#r-'))Cookie.dispose('S[N]');
                    if(!FIRST_REFER){

                        if(NOW_REFER){
                            this.writeCookie('S[FIRST_REFER]',NOW_REFER,this.getTimeOut(JSON.decode(NOW_REFER).DATE));
                        }else{
                            this.setRefer('S[FIRST_REFER]',__time_out);
                        }
                    }
                    this.setRefer('S[NOW_REFER]',__time_out);
                    this.createGUID();
                },
                getUid:function(){
                    var lf=window.location.href,pos=lf.indexOf('#r-');
                    return pos!=-1?lf.substr(pos+4):'';
                },
                getRefer:function(){
                    return document.referrer?document.referrer:'';
                },
                setRefer:function(referName,timeout){
                    var uid=this.getUid(),referrer=this.getRefer();
                    var data={'ID':uid,'REFER':referrer,'DATE':this.time};

                    if('S[NOW_REFER]'==referName){
                        var refer=JSON.decode(Cookie.read('S[FIRST_REFER]'));
                        if(uid!=''&&refer&&refer.ID==''){
                            var fdata={'ID':uid,'REFER':refer.REFER,'DATE':refer.DATE};
                            this.writeCookie('S[FIRST_REFER]',JSON.encode(fdata),this.getTimeOut(refer.DATE));
                        }else if(uid==''){
                            Object.append(data,{'ID':refer.ID});
                        }
                    }
                    Cookie.write(referName,JSON.encode(data),{duration:(__time_out||15)});
                },
                getTimeOut:function(nowDate){
                    var timeout=nowDate+__time_out*24*3600*1000;
                    var date=new Date(timeout);
                    return date;
                },
                writeCookie:function(key,value,timeout){
                    document.cookie=key+ '=' + value+'; expires=' + timeout.toGMTString();
                },
                createGUID:function(){
                    var GUID = (function(){
                        var S4=function(){
                            return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
                        };
                        return (S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()).toUpperCase();
                    })();
                    Cookie.write('S[N]',GUID,{duration:3650});
                }
            });
            ReferObj.init();
        });


    </script>

    <script>
        (function(){
            RemoteLogin={
                init:function(){
                    if(!$$('.trust__login')||$$('.trustdialog').length)return;
                    $$('.trust__login').removeEvents('click').addEvent('click',this.show.bind(this));
                },
                show:function(){
                    new Request({
                        url:'/trust-trust_login.html',
                        onRequest:function(){
                            var winWidth = 440,
                            winHeight = 330,
                            winTop=(screen.availHeight - winHeight)/2,
                            winLeft=(screen.availWidth - winWidth)/2,
                            param0 = "toolbar=no,menubar=no,scrollbars=no,resizable=no,location=no, status=no,directories=no",
                            params = "top=" + winTop + ",left=" + winLeft + ",width=" + winWidth + ",height=" + winHeight + "," + param0;
                            this.opt = params;
                            this.modelopt = "dialogHeight:" + winHeight + "px;dialogWidth:" + winWidth + "px;center:yes;help:no;resizable:no;status:no;scroll:no;";
                            //this.title = "信任登录";
                            /*
                              this.loginDialog = new Element('div',{'class':'dialog trustdialog','id':'trust_footer_login'}).set('html',document.getElement('#template-modal .dialog').get('html').substitute({
                              title:'信任登录',
                              content:'<iframe src="" id="RemoteFrm" width="100%" height="90%" frameborder="0" styles="border:none;background: none repeat scroll 0% 0% transparent; "></iframe>'
                               })).setStyles({display:'none',width:0}).inject(document.body);

                              this.loginDialog.getElement('.dialog-close-btn').addEvent('click',function(){$('trust_footer_login').destroy();});
                              this.loginDialog.setStyles({width:440,height:330,display:'block'}).position();
                          */
                        },
                        onComplete:function(e){
                            if(e){
                                var remotesrc='http://openid.ecos.shopex.cn/?certi_id=1060984732&callback_url=#?trust-other_login.html&refertype=ecstore';
                            }else{
                                var remotesrc='/trust-error.html';
                            }
                            //this.loginDialog.getElement('iframe').src=remotesrc;
                            //location.href = remotesrc;
                            //if(window.showModalDialog) window.showModalDialog(remotesrc,"",this.modelopt);
                            open(remotesrc,"信任登录",this.opt);
                            //NewWin.document.title = "信任登录";
                        }
                    }).post();
                }
            };
            RemoteLogin.init();
        })();
    </script>
    <script>
        miniCart = {
            'show':function(target){
                target = $(target);
                if (!target) return;

                if(this.dialog){
                    this.hide();
                }

                var _this=this, dialog = this.dialog = (new Element('div#mini-cart-dialog.popup-container.mini-cart-dialog',{
                    'html': $('popup-template').get('html').substitute({
                        body: 'popup-body',
                        header: 'popup-header',
                        close: 'popup-btn-close',
                        content:'popup-content',
                        title:'正在加入购物车',
                        main:'<div class="loading">loading...</div>'
                    }),
                    styles:{
                        display:'block'
                    }
                }).inject(document.body));


                var setSize = this.setSize = function(){
                    if(!_this.dialog.isDisplay())return;
                    $(_this.dialog).setStyles({
                        top:target.getPosition().y+target.getSize().y,
                        left:target.getPosition().x.limit(0,window.getSize().x-_this.dialog.getSize().x) + window.getScroll().x
                    });
                }
                setSize();


                window.addEvent('resize',setSize);



            },
            'hide':function(){
                try{
                    this.dialog.destroy();
                    window.removeEvent('resize',this.setSize);
                }catch(e){}
                try{document.getElement('.dialog-specbox').getParent('[data-single]').retrieve('instance').hide();}catch(e){}
            },
            'load':function(){
                var params=Array.flatten(arguments).link({
                    'remoteURL':Type.isString,
                    'options':Type.isObject
                });
                params.options.data = params.options.data?params.options.data.toQueryString()+'&mini_cart=true':'&mini_cart=true';
                var opts=params=Object.append({
                    url:params.remoteURL,
                    method:'post',
                    onRequest:function(){
                        //this.dialog.getElement('.title').set('html','正在加入购物车');
                    }.bind(this),
                    onSuccess:function(re){
                        var rs;
                        try{
                            rs = JSON.decode(re);
                        }catch(e){}

                        if(rs && rs.url) {
                            if(Browser.ie && Browser.version < 9) {
                                var link_tmp = document.createElement("a");
                                link_tmp.href=rs.url;
                                document.body.appendChild(link_tmp);
                                link_tmp.click();
                                link_tmp.destroy();
                            }
                            else {
                                location.href = rs.url;
                            }
                        } else if(rs && rs.error) {
                            $(this.dialog).destroy();
                            Message.error(rs.error);
                        } else {

                            this.dialog.getElement('h2').set('html','成功加入购物车');
                            this.dialog.getElement('.popup-content').innerHTML=re;
                            this.dialog.getElements('.popup-btn-close').addEvent('click',this.hide.bind(this));

                            if($$('.cart-number')) $$('.cart-number').set('text',Cookie.read('S[CART_NUMBER]')||0);
                            if($$('.cart-count')) $$('.cart-count').set('text',Cookie.read('S[CART_COUNT]')||0);
                            if($$('.cart-money-total')) $$('.cart-money-total').set('text',Cookie.read('S[CART_TOTAL_PRICE]')||0);

                            if($('MyCart')){//todo
                                $('MyCart').retrieve('fn:refresh',function(){})();
                            }

                            if(document.getElement('.minicart_box')&&document.getElement('.minicart_box').get('show_gallery')){
                                document.getElement('.minicart_box').fireEvent('_show');  //迷你购物车
                            }


                        }
                    }.bind(this),
                    onFailure:function(xhr){
                        this.dialog.destroy();
                        Message.error("加入购物车失败.<br /><ul><li>可能库存不足.</li><li>或提交信息不完整.</li></ul>");
                    }.bind(this)
                },params.options||{});
                if(!params.url)return false;

                miniCart.show(opts.target);
                new Request(opts).send();
            },
            init:function(){

                var _clickBubblesCount = 4;
                $(document.body).addEvent('click',function(e){

                    var clickT = e.target;
                    var matchEl = null;

                    for (var i = 0; i < _clickBubblesCount; i++) {

                        if (clickT&&clickT.match&&clickT.match("a[target=_dialog_minicart]")){
                            matchEl = clickT;
                            break;
                        }

                        clickT = clickT && $(clickT.parentNode);
                    }

                    if(matchEl&&!matchEl.hasClass('hasSpec')){
                        e.stop();
                        miniCart.load([{url:matchEl.href,data:matchEl.getParent('tr'),target:matchEl}]);
                    }




                });
                /*
                 var linktocart=$$('a[target=_dialog_minicart]');
                 if(linktocart.length){
                     linktocart.addEvent('click',function(e){
                         e.stop();
                         if(!this.hasClass('hasSpec'))

                     });
                 }
               */

            }
        };

        formToCart = function(container) {
            container = $(container) || document.body;

            var formtocart;
            if(formtocart = container.getElement('form[target=_dialog_minicart]') || container.getFirst().getParent('form[target=_dialog_minicart]')){
                formtocart.addEvent('submit', function(e){
                    e.stop();
                    this.getElement('[type=submit]') && this.getElement('[type=submit]').removeClass('disabled');
                    miniCart.load([{
                        url:this.action,
                        method:this.method,
                        data:this,
                        target:this.getElement('input[value=加入购物车]') || null
                    }]);
                });
            };
        }

        //规格选择对话框
        specdialog = this.SpecDialog = function(contain, options){
            contain=$(contain)||document;
            options = options || {};
            var hasSpec=contain.getElements(options.specbtn || '.hasSpec');
            if(!hasSpec.length) return;

            var url = options.url || '';
            var itemlist = options.item || '.itemsList';
            var btn = options.minitarget || '.updateBtn';
            hasSpec.each(function(specbtn,i){
                var item=specbtn.getParent(itemlist)||contain.getElements(itemlist)[i];
                if(!item) return;
                item.addEvent('showSpec', function(e){
                    e.stop();
                    if(this.retrieve('showSpec')) return;
                    try{document.getElement('.dialog-specbox').getParent('[data-single]').retrieve('instance').hide();}catch(e){}
                    url=(url && !!url.trim().length)?url:this.get('url');
                    var dialog = new Ex_Dialog(url,Object.merge({
                        modal:true,
                        width: 370,
                        height: 212,
                        async:'ajax',
                        single: true,
                        asyncOptions:{
                            target: this,
                            data:'gid='+this.get('product'),
                            onSuccess:function(){
                                if (options.onSuccess) options.onSuccess(contain, dialog, hasSpec);
                                var _form=$('dialog-spec').getParent('form');
                                _form.addEvent('submit',function(e){
                                    if(this.target!='_dialog_minicart') return this.submit();
                                    miniCart.load([{
                                        url:this.action,
                                        method:this.method,
                                        data:this,
                                        target: this.getElement(btn)
                                    }]);
                                });
                            }
                        },
                        position:{target:this},
                        effect:{duration:250},
                        onClose:function(){
                            this.content.set('html',this.options.ajaxTpl);
                            item.eliminate('showSpec');
                            try{miniCart.hide();}catch(e){}
                        }
                    }, options));
                    this.store('showSpec', this);
                });
                specbtn.addEvent('click',function(e){item.fireEvent('showSpec',e);});
            });
        }

        window.addEvent('domready',function(){
            miniCart.init();
            formToCart();

            /*for  goods which has specs
            var isDebug = 'js/',
            path ='/app/b2c/statics/' + isDebug;

            $LAB.setOptions({BasePath:path}).script('spec.js').wait(function(){
              try{
                // update: 规格商品2次提交 --by Tyler Chao
                var spec_update=$$('.goods-spec')[0].retrieve('_goods_spec');
                document.getElement('#goods-viewer form[target] .btn-buy').removeEvents('click').addEvent('click',function(e){
                    var form = this.form;
                    if(!form) return;
                    if(form.target == '_dialog_minicart') {
                        e.stop();
                        if(!spec_update) return form.fireEvent('submit', e);
                    }
                    this.blur();
                    var spec_item = spec_update._selectUpdate.check(this.getParent('.ec-spec-box'), this);
                    if(!spec_item.nocheck.length && form){
                        form.action="/cart-add-goods.html";
                        // if(form.target == '_dialog_minicart') form.fireEvent('submit',e);
                    } else if(Browser.ie6) {
                        $$(spec_item.nocheckel).length && $$(spec_item.nocheckel).addClass('warn');
                        Message.error('请选择规格:' + spec_item.nocheck.join(','));
                    }
                });
              }catch(e){}
            });*/

            specdialog();
        });
    </script>
    <script id="dropmenu-template" type="text/template">
        <div class="{body}">
            <div class="{content} clearfix">{main}</div>
        </div>
    </script>
    <script id="popup-template" type="text/template">
        <div class="{body}">
            <div class="{header} clearfix">
                <h2>{title}</h2>
                <span><button type="button" title="关闭" class="{close}" hidefocus>x</button></span>
            </div>
            <div class="{content} clearfix">{main}</div>
        </div>
    </script>
    <script id="passport-popup-template" type="text/template">
        <div id="passport-popup" class="{body}">
            <button type="button" title="关闭" class="{close}" hidefocus></button>
            <div class="{content} clearfix">{main}</div>
        </div>
    </script>
    <div class="themefootText textcenter">
        <div class="font11px"><br></div>
    </div>
    <div class="FormWrap goods-compare" id="goods-compare" style="display: none; position: fixed;">
        <div class="title clearfix"><h3 class="flt">商品对比</h3><span class="close-gc del-bj frt" onclick="gcompare.hide();">关闭</span></div>
        <form action="#?product-diff.html" method="post" target="_compare_goods">
            <ul class="compare-box">
                <li class="division clearfix tpl">
                    <div class="goods-name">
                        <a href="#?%7Burl%7D" gid="{gid}" title="{gname}">{gname}</a>
                    </div>
                    <a class="btn-delete" onclick="gcompare.erase(&quot;{gid}&quot;,this);">删除</a>
                </li>
            </ul>
            <div class="compare-bar">
                <button name="comareing" type="button" onclick="gcompare.submit()" class="btn btn-compare submit-btn"><span><span>对比</span></span></button>
                <button class="btn btn-compare" type="button" onclick="gcompare.empty()"><span><span>清空</span></span></button>
            </div>
        </form>
    </div><ul class="autocompleter-choices" style="z-index: 42; opacity: 0;"></ul>